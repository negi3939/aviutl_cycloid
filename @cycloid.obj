@サイクロイド歯車
--color:0xffff00
--track0:基礎半径,0,1000,100,0.5
--track1:描画半径,0,300,20,0.5
--track2:歯数,0,100,3,1
--track3:オフセット,0,300,0,0.1
n= 5000
thickness = 10
rc = obj.getvalue(0)
rd = obj.getvalue(1)
rm = rc/obj.getvalue(2)
offsetr = obj.getvalue(3)
obj.load("figure","円",color,thickness)
theta=0
signoff = 1
for ii=0,n-1 do
	theta = ii*2*math.pi/n 
	cycx = (rc+rm)*math.cos(theta)-rd*math.cos((rc+rm)/rm*theta)
	cycy = (rc+rm)*math.sin(theta)-rd*math.sin((rc+rm)/rm*theta)
	fcx = (rc+rm)*math.cos(theta)-rd*(rc+rm)/rm*math.cos((rc+rm)/rm*theta) 
	fcy = (rc+rm)*math.sin(theta)-rd*(rc+rm)/rm*math.sin((rc+rm)/rm*theta)
	if(fcx*cycx+fcy*cycy < 0) then
		signoff = 1
	else
		signoff = -1
	end
	cyclx = cycx + signoff*offsetr/math.sqrt(fcx*fcx+fcy*fcy)*fcx
	cycly = cycy + signoff*offsetr/math.sqrt(fcx*fcx+fcy*fcy)*fcy
	obj.draw(cyclx,cycly,0,0.5)
end